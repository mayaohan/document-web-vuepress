(window.webpackJsonp=window.webpackJsonp||[]).push([[161],{476:function(n,s,e){"use strict";e.r(s);var a=e(1),t=Object(a.a)({},(function(){var n=this,s=n._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[s("h2",{attrs:{id:"vue3源码解析-一"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vue3源码解析-一"}},[n._v("#")]),n._v(" vue3源码解析（一）")]),n._v(" "),s("blockquote",[s("p",[n._v("对于程序架构来说，为了实现最优的更新性能.，它需要找到前后的差异并只更新变化的地方，最终完成这次更新的代码仍然是:")])]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("  div.textContent = 'hello vue3'\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br")])]),s("p",[s("strong",[n._v("命令式代码:")])]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v(' const dom =  document.getElementById("root");    \n dom.createTextNode......  \n')])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br")])]),s("p",[s("strong",[n._v("可以理解成原生js直接操作DOM 以innerHTML的形式创建DOM 其中包括 重绘、回流 性能影响很大")])]),n._v(" "),s("p",[s("strong",[n._v("声明式代码：")])]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v('<div @click="handleClick"></div>\n')])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br")])]),s("blockquote",[s("p",[n._v("如果我们把直接修改的性能 定义为 A  把找出差异的性能消耗定义为 B 那么有：\n命令式代码的更新性能消耗  = A\n声明式代码的更新性能消耗  =  B + A\n可以看到，声明式代码会比命令式代码多出找出差异的性能消耗，因此最理想的情况是, 找出差异的性能消耗为 0 时\n声明式代码与命令式代码的性能相同, 但是无法做到超越, 毕竟框架本身就是封装命令式代码 才实现了面向要用户的声明式")])]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v('<div @click="handleClick"></div>\n')])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br")])]),s("p",[s("strong",[n._v("声明式代码的性能不优于命令式代码的性能")])]),n._v(" "),s("h3",{attrs:{id:"编译时的render函数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#编译时的render函数"}},[n._v("#")]),n._v(" 编译时的render函数")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("function Render(obj, root) {\n   const el = document.createElement(obj, tag)\n   // 判断传入的dom子节点是否是string类型\n   if (Object.prototype.toString.call(obj.children) === \"[object String]\") {\n       const text = document.createTextNode(obj.children)\n       el.appendChild(text)\n   } else if (obj.children) {\n       // 数组、递归调用render 使用el 作为root参数 \n       obj.children.forEach((child) => Render(child, el))\n   }\n   // 将元素添加到 root\n   root.appendChild(el)\n}\n/**\n* how to use 如何使用\n*/\nconst obj = {\n   tag: 'div',\n   children: [\n       { tag: 'span', children: \"hello Render\"}\n   ]\n}\n// 渲染到body下\nRender(obj, document.body)\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br"),s("span",{staticClass:"line-number"},[n._v("11")]),s("br"),s("span",{staticClass:"line-number"},[n._v("12")]),s("br"),s("span",{staticClass:"line-number"},[n._v("13")]),s("br"),s("span",{staticClass:"line-number"},[n._v("14")]),s("br"),s("span",{staticClass:"line-number"},[n._v("15")]),s("br"),s("span",{staticClass:"line-number"},[n._v("16")]),s("br"),s("span",{staticClass:"line-number"},[n._v("17")]),s("br"),s("span",{staticClass:"line-number"},[n._v("18")]),s("br"),s("span",{staticClass:"line-number"},[n._v("19")]),s("br"),s("span",{staticClass:"line-number"},[n._v("20")]),s("br"),s("span",{staticClass:"line-number"},[n._v("21")]),s("br"),s("span",{staticClass:"line-number"},[n._v("22")]),s("br"),s("span",{staticClass:"line-number"},[n._v("23")]),s("br"),s("span",{staticClass:"line-number"},[n._v("24")]),s("br")])])])}),[],!1,null,null,null);s.default=t.exports}}]);