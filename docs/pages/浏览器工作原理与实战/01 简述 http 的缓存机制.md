---
title: 简述 http 的缓存机制
date: 2023-04-23 19:59:14
permalink: /pages/ef31a5/
categories: 
  - 全部分类
  - 浏览器工作原理与实战
tags: 
  - null
author: 
  name: Clare
  link: https://github.com/mayaohan/document-web-vuepress
---
强缓存和协议缓存
-------------
> HTTP缓存机制是指在浏览器和服务器之间传输HTTP资源时，为了提高性能和减少网络流量，浏览器会使用一些策略来避免重复请求已经获取过的资源。

<!-- more -->

**HTTP缓存机制分为两类：强缓存和协商缓存。**

强缓存
-----
当浏览器第一次请求一个资源时，服务器可以通过设置HTTP响应头来告诉浏览器是否可以缓存该资源。如果可以，则浏览器将在下一次请求该资源时直接从本地缓存中获取，而不需要发送HTTP请求到服务器。

**常用的HTTP响应头有：**

+ Cache-Control：控制缓存行为的主要方式。可以设置多个指令，例如max-age表示缓存的最长时间，单位为秒；**no-cache**表示缓存但需要验证；**no-store**表示禁止缓存。
+ Expires：与**Cache-Control**类似，但使用的是绝对时间，即缓存到何时失效。
+ ETag：资源的标识符，由服务器生成，每次资源内容发生变化时都会更新。

协商缓存
------
当浏览器再次请求一个已经缓存的资源时，它会向服务器发送一个HTTP请求，并带上上一次请求中获得的一些信息，例如**If-Modified-Since**和**If-None-Match**。服务器可以利用这些信息判断资源是否已经发生了变化，如果没有变化，则返回一个HTTP响应头，并告诉浏览器可以使用缓存中的资源。否则，服务器会返回新的资源并带上新的HTTP响应头。

**常用的HTTP响应头有：**

+ Last-Modified：资源的最后修改时间，由服务器发送。
+ If-Modified-Since：客户端保存的上一次请求资源的最后修改时间。
+ ETag：与强缓存相同。
+ 需要注意的是，在实际开发中，我们可以根据不同类型和频率的资源采用不同的缓存策略，以提高性能和用户体验。